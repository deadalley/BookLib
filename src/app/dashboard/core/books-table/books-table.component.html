<div class="row" [@card]>
  <div class="col-md-12">
    <div class="card">
      <div class="content table-responsive table-full-width">
        <table class="table table-hover table-striped">
          
          <thead>
            <tr>
              <th class="col-md-1"></th>
              <th class="col">Title</th>
              <th *ngIf="hasAuthor" class="col-md-2">Author</th>
              <th *ngIf="hasDate" class="col">Added on</th>
              <th *ngIf="withButtons" class="col-md-1"></th>
              <th *ngIf="selectable" class="col">Status</th>
              <th *ngIf="selectable" class="col"></th>
              <th *ngIf="clickable" class="col"></th>
            </tr>
          
          <tbody>
            <tr *ngFor="let book of books">
              <td>
                <a
                  *ngIf="linkable"
                  href="javascript:void(0);"
                  routerLink="/dashboard/books/{{ book.id }}"
                >
                  <img
                    [src]="
                      book.imageLarge
                        ? book.imageLarge
                        : book.imageSmall
                        ? book.imageSmall
                        : '/assets/img/no-book-cover.png'
                    "
                    alt="Book cover"
                  />
                </a>
                <img
                  *ngIf="!linkable"
                  [src]="
                    book.imageLarge
                      ? book.imageLarge
                      : book.imageSmall
                      ? book.imageSmall
                      : '/assets/img/no-book-cover.png'
                  "
                  alt="Book cover"
                />
              </td>
              <td class="col">
                <a *ngIf="linkable" href="#" routerLink="../books/{{book.id}}">{{book.title}}</a>
                {{linkable ? '' : book.title}}
              </td>
              
              <td *ngIf="hasAuthor" class="col-md-2">
                <a *ngIf="linkable" href="#" [routerLink]="authorRoute(book)">{{book.author}}</a>
                {{linkable ? '' : book.author}}
              </td>
              
              <td *ngIf="book.date" class="col">{{formatDate(book.date)}}</td>
              
              <td *ngIf="withButtons" class="col-md-2">
                <div class="icons">
                  <i class="pe-7s-check tile-icon"
                    [ngClass] = "{'inactive': !book.owned, 'owned': book.owned}"
                    tooltip="{{book.owned ? 'Owned' : 'Not owned'}}"
                          [isDisabled]="false"
                          [tooltipAnimation]="true"
                          placement="bottom"></i>
                  <i class="pe-7s-gift tile-icon"
                          [ngClass] = "{'inactive': !book.wishlist, 'wishlist': book.wishlist}"
                          tooltip="{{book.wishlist ? 'In wishlist' : 'Not in wishlist'}}"
                                [isDisabled]="false"
                                [tooltipAnimation]="true"
                                placement="bottom"></i>
                  <i class="pe-7s-glasses tile-icon"
                    [ngClass] = "{'inactive': !book.read, 'read': book.read}"
                    tooltip="{{book.read ? 'Read' : 'read'}}"
                          [isDisabled]="false"
                          [tooltipAnimation]="true"
                          placement="bottom"></i>
                  <i class="pe-7s-like tile-icon"
                    [ngClass] = "{'inactive': !book.favorite, 'favorite': book.favorite}"
                    tooltip="{{book.favorite ? 'Favorite' : 'Not a favorite'}}"
                          [isDisabled]="false"
                          [tooltipAnimation]="true"
                          placement="bottom"></i>
                </div>
              </td>

              <td *ngIf="selectable" class="col-xs-3">
                <div class="text-muted" style="font-style: italic">
                  <i style="font-size: 0.9em" [ngClass]="{'ti-check': book.isSelected || !book.canBeSelected, 'ti-close': !book.isSelected}"></i>
                  {{
                    book.canBeSelected 
                    ? (book.isSelected ? statusIncluded : statusNotIncluded)
                    : statusCannotBeSelected
                  }}
                </div>
              </td>

              <td *ngIf="selectable" class="col-xs-3">
                <button
                  style="text-align: center"
                  class="btn btn-default"
                  type="button"
                  [disabled]="!book.canBeSelected"
                  (click)="updateSelectedBooks(book)"
                >{{book.isSelected ? 'Remove' : 'Add'}}</button>
              </td>

              <td *ngIf="clickable" class="col-xs-3">
                <button
                  style="text-align: center"
                  class="btn btn-default"
                  type="button"
                  (click)="updateSelectedBooks(book)"
                >Select</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>