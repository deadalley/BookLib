<a href="javascript:void(0);" (click)="this.location.back();">‚Üê Return</a>
<div class="card" [@cardaddbook]>
	<div class="header">
		<h4 class="title">Add new book</h4>
		<p class="category" placement="bottom">Add a new book to your library or wishlist</p>
	</div>
	<div class="content">
		<form [formGroup]="form" (ngSubmit)="addBook(form.value)">
			<!-- Image -->
			<div class="image book-image" *ngIf="fromGoodreads">
				<img src="/assets/img/lc01.jpg" alt="Book cover">
			</div>
			<!-- Summary -->
			<div id="book-summary" *ngIf="fromGoodreads">
				<label>Summary</label>
				<p>{{summary}}</p>
			</div>
			<div class="row">
        <div class="col-md-6">
          <!-- Title -->
          <div class="form-group" [ngClass] = "{'has-error': !form.controls['title'].valid && form.controls['title'].touched}">
            <label>Book Title *</label>
            <input type="text" class="form-control" placeholder="Your version title" formControlName="title">
            <span class="help-block" *ngIf="!form.controls['title'].valid && form.controls['title'].touched">Please enter a valid book title.</span>
          </div>
        </div>
        <!-- Original title -->
        <div class="col-md-4">
          <div class="form-group">
            <label>Original Title</label>
            <input type="text" class="form-control" placeholder="Original version title" formControlName="original">
          </div>
        </div>
        <div class="col-md-2">
          <label>Book Cover</label>
          <button type="button"
            (click)="console.log('Add book cover')"
            [ngClass] = "{'active': true}"
            class="library-button btn btn-default"
            style="vertical-align: center; font-size=1.2em"
            tooltip="Load a book cover"
            [tooltipDisabled]="false"
            [tooltipAnimation]="true"
            tooltipPlacement="bottom"
          >
            <span class="pe-7s-photo" aria-hidden="true" style="font-size: 1.2em;"></span>
          </button>
        </div>
			</div>
			<!-- Author -->
			<div class="form-group">
				<label>Author</label>
				<div class="row">
					<div class="col-md-3" *ngIf="fromGoodreads">
						<!-- Author image -->
						<div class="image author-image">
              <img src="/assets/img/lee-child.jpg" alt="Author">
						</div>
					</div>
					<div class="col-md-9">
						<!-- Name -->
						<div class="form-group" [ngClass] = "{'has-error': !form.controls['author'].valid && form.controls['author'].touched}">
							<label>Name *</label>
							<div class="row">
								<div class="col-md-10">
									<input type="text" class="form-control" placeholder="Author name" formControlName="author">
									<span class="help-block" *ngIf="!form.controls['author'].valid && form.controls['author'].touched">Please enter a valid author name.</span>
								</div>
								<div class="col-md-2">
									<!-- Author Watch --
									<button type="button"
										(click)="form.controls['authorWatch'].setValue(!form.controls['authorWatch'].value)"
										[ngClass] = "{'active': form.controls['authorWatch'].value}"
										class="library-button btn btn-default"
										style="vertical-align: center; font-size=1.2em"
										tooltip="Add this author to your watch list"
										[tooltipDisabled]="false"
										[tooltipAnimation]="true"
										tooltipPlacement="bottom">
										<span class="pe-7s-look" aria-hidden="true" style="font-size: 1.2em;"></span>
									</button> -->
								</div>
							</div>
						</div>
            <!-- Author bio -->
            <ng-container *ngIf="fromGoodreads">
              <p>James D. "Jim" Grant, better known by his pen name Lee Child, is a British author who writes thriller novels. He is especially known for his Jack Reacher novel series.</p>
              <!-- Author info -->
              <p style="font-size: 0.9em;">
                <b>Born:</b> October 29, 1954 (age 62), Coventry, United Kingdom
                <br><b>Full name:</b> James D. Grant
                <br><b>Genre:</b> Crime fiction, mystery, thriller
                <br><b>Movies:</b> Jack Reacher, Jack Reacher: Never Go Back
              </p>
              <!-- Author website -->
              <i class="pe-7s-global" style="font-size: 1.3em;" ></i> <a href="#">leechild.com</a>
            </ng-container>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-8">
					<!-- Publisher -->
					<div class="form-group">
						<label>Publisher</label>
						<input type="text" class="form-control" placeholder="Publisher" formControlName="publisher">
					</div>
				</div>
				<div class="col-md-2">
					<!-- Year -->
					<div class="form-group">
						<label>Year</label>
						<input type="number" class="form-control" placeholder="Year" formControlName="year">
					</div>
				</div>
				<div class="col-md-2">
					<!-- Pages -->
					<div class="form-group">
						<label>Pages</label>
						<input type="number" class="form-control" formControlName="pages">
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6">
          <!-- Genres -->
					<div class="form-group">
            <!-- Genres -->
            <book-tags
              title="Genres"
							placeholder="Add genre..."
							(getItems)="getGenres($event)"
            ></book-tags>
					</div>
				</div>
				<div class="col-md-3">
					<!-- Collection -->
					<div class="form-group">
						<label>Collection</label>
						<div class="dropdown">
							<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
								{{selectedCollection.title}}
								<span class="caret"></span>
							</button>
							<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
								<li><a href="javascript:void(0);" data-toggle="modal" data-target="#newCollection">New collection</a></li>
								<li role="separator" class="divider"></li>
								<li *ngFor="let collection of collections; let i = index">
                  <a href="javascript:void(0);" (click)="selectedCollection = collections[i]">
                    {{collection.title}}
                  </a>
                </li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<!-- Language -->
					<div class="form-group">
						<label>Language</label>
						<div class="dropdown">
							<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
								{{selectedLanguage}}
								<span class="caret"></span>
							</button>
							<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
								<li *ngFor="let language of languages; let i = index">
                  <a href="javascript:void(0);" (click)="selectedLanguage = languages[i]">
                    {{language}}
                  </a>
                </li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6">
          <!-- Tags-->
					<div class="form-group">
            <!-- Tags -->
            <book-tags
              title="Tags"
              placeholder="Add tags..."
							iconClass="pe-7s-ticket"
							(getItems)="getTags($event)"							
            ></book-tags>
					</div>
				</div>
				<div class="col-md-3">
					<!-- About -->
					<div class="form-group">
						<label>About</label><br>
						<div class="btn-group" role="group">
							<button type="button"
								(click) = "this.book.owned = !this.book.owned"
								class="btn btn-default" [ngClass]="{'selected': this.book.owned}"
								tooltip="Owned"
								[tooltipDisabled]="false"
								[tooltipAnimation]="true"
								tooltipPlacement="bottom">
								<i class="pe-7s-check" style="font-size: 1.3em;"></i>
							</button>
							<button type="button"
								(click) = "this.book.owned = !this.book.owned"
								class="btn btn-default" [ngClass]="{'selected': !this.book.owned}"
								tooltip="Wishlist"
								[tooltipDisabled]="false"
								[tooltipAnimation]="true"
								tooltipPlacement="bottom">
								<i class="pe-7s-gift" style="font-size: 1.3em;"></i>
							</button>
							<button type="button"
								(click) = "this.book.read = !this.book.read"
								class="btn btn-default" [ngClass]="{'selected': this.book.read}"
								tooltip="Read"
								[tooltipDisabled]="false"
								[tooltipAnimation]="true"
								tooltipPlacement="bottom">
								<i class="pe-7s-glasses" style="font-size: 1.3em;"></i>
							</button>
							<button type="button"
								(click) = "this.book.favorite = !this.book.favorite"
								class="btn btn-default" [ngClass]="{'selected': this.book.favorite}"
								tooltip="Favorite"
								[tooltipDisabled]="false"
								[tooltipAnimation]="true"
								tooltipPlacement="bottom">
								<i class="pe-7s-like" style="font-size: 1.3em;"></i>
							</button>
						</div>
					</div>
        </div>
        <div class="col-md-3">
          <!-- Rating -->
          <div class="form-group">
            <label>Rating</label><br>
            <rating [float]="true" formControlName="rating"></rating>
          </div>
        </div>
      </div>
      <!-- Notes -->
			<div class="form-group">
				<label>Notes</label>
				<textarea formControlName="notes" rows="5" class="form-control" placeholder="Leave notes, thoughts, or a full review of the book here :)" value=""></textarea>
			</div>
			<hr>
			<div style="text-align: center;">
				<button type="submit" class="btn btn-default" [disabled]="!form.valid">Add book</button>
			</div>
		</form>
	</div>
</div>
