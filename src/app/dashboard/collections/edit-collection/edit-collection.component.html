<loading [visible]="isLoading"></loading>
<page-navigator *ngIf="!isLoading">
  <div class="card" [@card]>
    <div class="header">
      <h4 class="title">{{title}}</h4>
      <p class="category" placement="bottom">{{description}}</p>
    </div>
    <div class="content">
      <form [formGroup]="form" (ngSubmit)="submit(form.value)">
        <div class="row">
          <div class="col-xs-12">
            <!-- Title -->
            <div class="form-group" [ngClass] = "{'has-error': !form.controls['title'].valid && form.controls['title'].touched}">
              <label>Collection Title <span style="color: red">*</span></label>
              <input type="text" class="form-control" placeholder="Your version title" formControlName="title">
              <span class="help-block" *ngIf="!form.controls['title'].valid && form.controls['title'].touched">Please enter a valid title.</span>
            </div>
          </div>
        </div>
        <!-- Description -->
        <div class="form-group">
          <label>Description</label>
          <textarea formControlName="description" rows="3" class="form-control" placeholder="What is this collection about?" value=""></textarea>
        </div>
        <div class="row">
					<div class="col-xs-12 required">
						<span style="color: red">*</span> Required fields
					</div>
        </div>

        <!-- Add books -->
        <div class="row">
          <div class="col-xs-12">
            <a href="#addBooks" data-toggle="collapse" (click)="loadBooks()">
              <label style="padding:0;">Books </label>
              <i class="pe-7s-angle-down" style="font-size: 1.3em;"></i>
            </a>
            <hr style="margin-top: 0;">
          </div>
        </div>
        <div class="collapse" id="addBooks">
          <books-table
            [books]="books"
            [selectable]="true"
            [statusIncluded]="'Book in collection'"
            [statusNotIncluded]="'Book not in collection'"
          ></books-table>
        </div>
        <div>
          <div >
          </div>
        </div>

        <!-- Buttons -->
				<hr>
				<div class="row">
					<div class="col-md-6">
						<button type="button" class="btn btn-default" style="width: 100%" (click)="this.router.navigate(['../../'], { relativeTo: this.route })">Cancel</button>
					</div>
					<div class="col-md-6">
						<button type="button" class="btn btn-success" style="width: 100%" (click)="submit(form.value)" [disabled]="!form.valid">Save</button>
					</div>
				</div>
      </form>
    </div>
  </div>
</page-navigator>
