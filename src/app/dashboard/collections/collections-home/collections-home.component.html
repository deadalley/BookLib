<loading [visible]="isLoading"></loading>
<!-- Collections -->
<ng-container *ngIf="collections.length === 0">
  <div class="card" style="text-align: center;" [@card]>
    <div class="header">
      <!-- Header -->
      <h4 class="title">
        You don't have any collections yet.
      </h4>
      <hr>
      <p class="category" placement="bottom" style="padding-bottom: 10px">
        Do you want to add a new collection?
        Collections let your organize your books in any way you want!
        Click on the plus symbol above to create a new collection :)
      </p>
    </div>
  </div>
</ng-container>
<ng-container *ngFor="let collection of collections | collectionOrdering: orderingMethod">
  <!-- Separator -->
  <div class="row" id="{{removeSpaces(collection.title)}}">
    <div class="col-md-9">
      <!-- Title -->
      <h4 class="title">
        {{collection.title}}
        <!-- <a href="javascript:void(0);" routerLink="./{{collection.id}}/edit">
          <i class="pe-7s-note" style="font-size: 0.8em;"></i>
        </a>
        <a href="javascript:void(0);" (click)="confirmDeleteCollection(collection)">
          <i class="pe-7s-close-circle" style="font-size: 0.8em;"></i>
        </a> -->
      </h4>
    </div>
    <div class="col-md-3 buttons">
      <button class="btn btn-default btn-margin" routerLink="./{{collection.id}}/edit">
        <i class="pe-7s-note"></i>
        Edit
      </button>
      <button class="btn btn-danger btn-margin" (click)="confirmDeleteCollection(collection)">
        <i class="pe-7s-trash"></i>
        Delete
      </button>
    </div>
  </div>
  <hr class="library-hr">
  <p class="text-muted">{{collection.description}}</p>
  <div *ngIf="!collection.books || collection.books.length === 0">
    <h5 class="text-muted" style="font-style: italic; font-size: 0.9em; margin: 0">
      You currently don't have any books in this collection. You can click the editing icon above
      and add books to it, or you can delete it.
    </h5>
  </div>
  <div *ngIf="collection.books && collection.books.length > 0" [ngSwitch]="tilesDisplay">
    <books-section
      *ngSwitchCase="true"
      [books]="collection.books"
      [withButtons]="true"
      [linkable]="true"
    ></books-section>
    <books-table
      *ngSwitchCase="false"
      [books]="collection.books"
      [withButtons]="true"
      [linkable]="true"
      ></books-table>
  </div>
</ng-container>

<modal
  #deleteCollectionModal
  title="Are you sure you want to delete {{selectedCollection.title}}?"
  content="This collection will be removed permanently from your library. All books related to this collection will be kept."
  cancel="Cancel"
  accept="Accept"
  [onAccept]="deleteCollection.bind(this)"
></modal>